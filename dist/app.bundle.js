(()=>{"use strict";const t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const o=new Uint8Array(16);function n(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(o)}const r=[];for(let t=0;t<256;++t)r.push((t+256).toString(16).slice(1));const d=class{#t;#e;constructor(t){const{id:e,name:o}=t;this.#t=e,this.#e=o}get id(){return this.#t}set id(t){this.#t=t}get name(){return this.#e}set name(t){this.#e=t}toPlainObject(){return{id:this.#t,name:this.#e}}},i=class{#t;#o;#n;#r;#d;#i;#s;constructor(t){const{id:e,projectId:o,title:n,description:r,dueDate:d,priority:i,isDone:s}=t;this.#t=e,this.#o=o,this.#n=n,this.#r=r,this.#d=d,this.#i=i,this.#s=s}get id(){return this.#t}set id(t){this.#t=t}get projectId(){return this.#o}set projectId(t){this.#o=t}get title(){return this.#n}set title(t){this.#n=t}get description(){return this.#r}set description(t){this.#r=t}get dueDate(){return this.#d}set dueDate(t){this.#d=t}get priority(){return this.#i}set priority(t){this.#i=t}get isDone(){return this.#s}set isDone(t){this.#s=t}toPlainObject(){return{id:this.#t,projectId:this.#o,title:this.#n,description:this.#r,dueDate:this.#d,priority:this.#i,isDone:this.#s}}update(t){t.hasOwnProperty("id")&&(this.#t=t.id),t.hasOwnProperty("projectId")&&(this.#o=t.projectId),t.hasOwnProperty("title")&&(this.#n=t.title),t.hasOwnProperty("description")&&(this.#r=t.description),t.hasOwnProperty("dueDate")&&(this.#d=t.dueDate),t.hasOwnProperty("priority")&&(this.#i=t.priority),t.hasOwnProperty("isDone")&&(this.#s=t.isDone)}},s=function(t){const{id:e,name:o,isCurrent:n}=t,r=document.createElement("option");return r.value=e,r.textContent=o,r.selected=!!n,r},c=function(t){const{id:e,title:o,description:n,dueDate:r,priority:d,isDone:i}=t,s=document.createElement("div");s.classList.add("todo-item");const c=`\n    <div class="flex flex-row gap-x-2 mb-2">\n      <div class="">\n        <input\n          type="checkbox"\n          name="is-done-${e}"\n          id="is-done-${e}"\n          class="border-black border-2 rounded-lg p-2"\n          data-input-type="is-done-checkbox"\n          data-todo-id="${e}"\n          value="${e}"\n          ${i?"checked":""}\n        />\n      </div>\n      <div class="">\n        <p class="">\n          <label\n            for="is-done-${e}"\n            class="text-ellipsis ${i?"line-through":""}"\n          >\n            ${o}\n          </label>\n        </p>\n        <p class="text-ellipsis ${i?"line-through":""}">Due on ${r}</p>\n        <div\n          class="expanded-content overflow-hidden max-h-0"\n          id="expanded-content-${e}"\n        >\n          <p class="text-ellipsis ${i?"line-through":""}">Priority ${d}</p>\n          <p class="text-ellipsis ${i?"line-through":""}">${n}</p>\n        </div>\n      </div>\n    </div>\n    <button\n      type="button"\n      class="border-black border-2 rounded-lg p-2"\n      data-input-type="todo-more-button"\n      id="todo-more-button-${e}"\n      data-todo-id="${e}"\n    >\n      More\n    </button>\n    <button\n      type="button"\n      class="border-black border-2 rounded-lg p-2 hidden"\n      data-input-type="todo-less-button"\n      id="todo-less-button-${e}"\n      data-todo-id="${e}"\n    >\n      Less\n    </button>\n    <button\n      type="button"\n      class="border-black border-2 rounded-lg p-2"\n      data-input-type="todo-edit-button"\n      data-todo-id="${e}"\n    >\n      Edit\n    </button>\n    <button\n      type="button"\n      class="border-black border-2 rounded-lg p-2"\n      data-input-type="todo-delete-button"\n      data-todo-id="${e}"\n    >\n      Delete\n    </button>\n  `;return s.insertAdjacentHTML("beforeend",c),s},u=function(t){const{priority:e,isSelected:o}=t,n=document.createElement("option");return n.value=e,n.textContent=e,n.selected=o,n},a=function(t){const e=t.state,o=t.projectComponent,n=t.todoComponent,r=t.priorityComponent,d=t.projectIdSelect,i=t.todosRootDiv,s=t.todoDialog,c=t.todoForm,u=t.todoFormHeader,a=t.todoActionTypeInput,p=t.todoIdInput,l=t.todoProjectIdInput,h=t.todoTitleInput,m=t.todoDueDateInput,y=t.todoPriorityInput,g=t.todoDescriptionInput,j=t.projectDialog,I=t.projectNameInput,f=e.getTodos({projectId:e.getCurrentProjectId()}),b=[{priority:1,isSelected:!1},{priority:2,isSelected:!1},{priority:3,isSelected:!1},{priority:4,isSelected:!0}],D=function(t=e.getProjects()){const n=[];for(let r of t){const t={id:r.id,name:r.name,isCurrent:e.isCurrentProject(r)};n.push(o(t))}d.replaceChildren(...n)},P=function(t=e.getProjects()){const n=[];for(let r of t){const t={id:r.id,name:r.name,isCurrent:e.isCurrentProject(r)};n.push(o(t))}l.replaceChildren(...n)},v=function(t=f){const e=[];for(let o of t){const t=o.toPlainObject();e.push(n(t))}i.replaceChildren(...e)},T=function(t=b){const e=[];for(let o of t)e.push(r(o));y.replaceChildren(...e)},C=function(){return c.checkValidity()},S=function(){u.textContent="Create Todo",a.value="create",P(),p.value="",h.value="",m.value="",T(),g.value="",s.showModal()},w=function(t){const o=e.getTodos({id:t})[0],{id:n,title:r,dueDate:d,priority:i,description:c}=o;u.textContent="Edit Todo",a.value="edit",p.value=n,e.setCurrentProjectId(o.projectId),P(),h.value=r,m.value=d,T(function(t){const e=[];for(let o=1;o<=4;o++)e.push({priority:o,isSelected:o===t});return e}(i)),g.value=c,s.showModal()},$=function(t){e.setCurrentProjectId(d.value),v(e.getTodos({projectId:e.getCurrentProjectId()}))},L=function(t){const o=t.target;if("is-done-checkbox"!==o.dataset.inputType)return;const n=o.dataset.todoId,r=e.getTodos({id:n})[0].isDone;e.updateTodo({id:n,isDone:!r}),v(e.getTodos({projectId:e.getCurrentProjectId()}))},x=function(t){const o=t.target;"todo-new-button"===o.dataset.inputType?S():"todo-cancel-button"===o.dataset.inputType?s.close():"todo-submit-button"===o.dataset.inputType?function(t){const o={projectId:l.value,title:h.value,dueDate:m.value,priority:Number.parseInt(y.value),description:g.value},n=a.value;"create"===n&&C()?(o.isDone=!1,e.createTodo(o),e.setCurrentProjectId(o.projectId)):"edit"===n&&C()&&(o.id=p.value,e.updateTodo(o),e.setCurrentProjectId(o.projectId)),D(),v(e.getTodos({projectId:e.getCurrentProjectId()})),s.close()}():"todo-more-button"===o.dataset.inputType?function(t){const e=t.target.dataset.todoId;document.querySelector(`#expanded-content-${e}`).classList.toggle("max-h-0"),t.target.classList.toggle("hidden"),document.querySelector(`#todo-less-button-${e}`).classList.toggle("hidden")}(t):"todo-less-button"===o.dataset.inputType?function(t){const e=t.target.dataset.todoId;document.querySelector(`#expanded-content-${e}`).classList.toggle("max-h-0"),t.target.classList.toggle("hidden"),document.querySelector(`#todo-more-button-${e}`).classList.toggle("hidden")}(t):"todo-edit-button"===o.dataset.inputType?function(t){const e=t.target;w(e.dataset.todoId)}(t):"todo-delete-button"===o.dataset.inputType?function(t){const o=t.target.dataset.todoId;e.deleteTodo(o),v(e.getTodos({projectId:e.getCurrentProjectId()}))}(t):"project-new-button"===o.dataset.inputType?(I.value="",I.value="",j.showModal()):"project-cancel-button"===o.dataset.inputType?j.close():"project-submit-button"===o.dataset.inputType&&function(t){const o={name:I.value},n=o.name.replace(/\s/g,"").length>0,r=e.doesProjectExist(o.name);n&&!r&&(e.createProject(o),D()),j.close()}()};return{renderSelectProjects:D,renderInputProjects:P,renderTodos:v,openCreateTodoDialog:S,openEditTodoDialog:w,renderPriorities:T,attachEventListeners:function(t){t.addEventListener("click",x),t.addEventListener("change",L),d.addEventListener("change",$)}}},p=function(){const t=function(t){return t.name+"List"};return{getList:function(e){const o=localStorage.getItem(t(e));return null===o?[]:JSON.parse(o).map((t=>new e(t)))},storeList:function(e,o){const n=o.map((t=>t.toPlainObject()));localStorage.setItem(t(e),JSON.stringify(n))}}}();new i({id:"todo-dummyId1",projectId:"project-defaultId",title:"Dummy Todo Title",dueDate:"2024-02-02",priority:3,description:"Dummy Todo Description",isDone:!0}),new i({id:"todo-dummyId2",projectId:"project-hoohee",title:"Hoo",dueDate:"2025-01-01",priority:1,description:"hee",isDone:!1}),new d({id:"project-defaultId",name:"Uncategorized"}),new d({id:"project-hoohee",name:"Hoo Hee"}),new d({id:"project-emptyId",name:"Empty"});const l=function(t){let e=!!t.hasOwnProperty("isDebugMode");const o=t.localStorageHelper,n=t.getRandomId,r=t.projectClass,d=t.todoClass,i=new r({id:"project-defaultId",name:"Uncategorized"});let s=t.projects?t.projects:[i],c=t.todos?t.todos:[],u=i.id;const a=function(){console.log("Current App State",{projects:s,todos:c,currentProjectId:u})},p=function(t){c=t,e&&a()},l=function(t){s=t,e&&a()};return{loadFromLocalStorage:function(){const t=o.getList(r),n=o.getList(d);t.length>0&&l(t),n.length>0&&p(n),e&&a()},getCurrentProjectId:function(){return u},setCurrentProjectId:function(t){t!==u&&(u=t,e&&a())},isCurrentProject:function(t){return t.id===u},getTodos:function(t={}){return e&&a(),t.projectId?c.filter((e=>e.projectId===t.projectId)):t.id?c.filter((e=>e.id===t.id)):c},setTodos:p,createTodo:function(t){t.id=`todo-${n()}`,c.push(new d(t)),o.storeList(d,c),e&&a()},updateTodo:function(t){if(0===c.length||!t.id)return;const n=c.findIndex((e=>e.id===t.id));-1!==n&&(c[n].update(t),o.storeList(d,c),e&&a())},deleteTodo:function(t){if(0===c.length)return;const n=c.findIndex((e=>e.id===t));-1!==n&&(c.splice(n,1),o.storeList(d,c),e&&a())},getProjects:function(){return e&&a(),s},setProjects:l,createProject:function(t){t.id=`project-${n()}`,s.push(new r(t)),o.storeList(r,s),e&&a()},doesProjectExist:function(t){return t=t.toUpperCase(),e&&a(),s.some((e=>e.name.toUpperCase()===t))}}}({localStorageHelper:p,getRandomId:function(e,o,d){if(t.randomUUID&&!o&&!e)return t.randomUUID();const i=(e=e||{}).random||(e.rng||n)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,o){d=d||0;for(let t=0;t<16;++t)o[d+t]=i[t];return o}return function(t,e=0){return r[t[e+0]]+r[t[e+1]]+r[t[e+2]]+r[t[e+3]]+"-"+r[t[e+4]]+r[t[e+5]]+"-"+r[t[e+6]]+r[t[e+7]]+"-"+r[t[e+8]]+r[t[e+9]]+"-"+r[t[e+10]]+r[t[e+11]]+r[t[e+12]]+r[t[e+13]]+r[t[e+14]]+r[t[e+15]]}(i)},projectClass:d,todoClass:i});window.addEventListener("load",(function(){l.loadFromLocalStorage();const t=a({state:l,projectComponent:s,todoComponent:c,priorityComponent:u,projectIdSelect:document.querySelector("#project-id"),todosRootDiv:document.querySelector("#todos-root"),todoDialog:document.querySelector("#todo-dialog"),todoForm:document.querySelector("#todo-form"),todoFormHeader:document.querySelector("#todo-form-header"),todoActionTypeInput:document.querySelector("#todo-action-type"),todoIdInput:document.querySelector("#todo-id"),todoProjectIdInput:document.querySelector("#todo-project-id"),todoTitleInput:document.querySelector("#todo-title"),todoDueDateInput:document.querySelector("#todo-due-date"),todoPriorityInput:document.querySelector("#todo-priority"),todoDescriptionInput:document.querySelector("#todo-description"),projectDialog:document.querySelector("#project-dialog"),projectNameInput:document.querySelector("#project-name")});t.attachEventListeners(window),t.renderSelectProjects(),t.renderInputProjects(),t.renderTodos()}))})();
//# sourceMappingURL=app.bundle.js.map